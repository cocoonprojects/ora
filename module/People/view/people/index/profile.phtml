<?php
$this->headScript ()->appendFile ( $this->basePath () . '/js/task-utils.js' );
$this->headScript ()->appendFile ( $this->basePath () . '/js/profile.js' );
?>
<div class="container">
	<div class="row">
		<div class="col-md-6">
			<div class="row">
				<div class="col-md-4">
					<img id="photo" class="img-thumbnail img-responsive img-circle" src="" alt="Avatar">
				</div>
				<div id="user-info" class="col-md-8">
					<h3 id="name"></h3>
					<p id="birthday"></p>
					<address id="email"></address>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<p id="description"></p>
					<h4>Skills</h4>
					<p>No Skill available</p>
				</div>
			</div>
		</div>
		<div id="other-info" class="col-md-6">
			<p id="orgMembership"></p>
			<h4>Credits</h4>
			<table class="table">
				<caption>Generated credits</caption>
				<thead>
					<tr>
						<th class="text-center">Tot. Generated Credits</th>
						<th class="text-center">Available Credits</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td id="tdTotal" class="text-center"></td>
						<td id="tdAvailable" class="text-center"></td>
					</tr>
				</tbody>
			</table>
			<hr>
			<table class="table">
				<caption>Credit Account History</caption>
				<thead>
					<tr>
						<th class="text-center">Last 3 months</th>
						<th class="text-center">Last 6 months</th>
						<th class="text-center">Last Year</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td id="tdLast3Month" class="text-center"></td>
						<td id="tdLast6Month" class="text-center"></td>
						<td id="tdLastYear" class="text-center"></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<div id="task-metrics">
		<h4>Tasks contribution</h4>
		<form class="form-inline" id="taskFilters" method="get" action="<?= $this->url('tasks', ['orgId' => $this->layout()->getVariable('organization')->getId()])?>">
			<input type="hidden" name="memberId" value="<?= $this->layout()->getVariable('user') ?>">
			<input type="hidden" name="offset" value="0">
			<input type="hidden" name="limit" value="10">
			<div class="form-group">
				<label for="startOn">From</label>
				<input type="date" class="form-control" id="startOn" name="startOn">
			</div>
			<div class="form-group">
				<label for="endOn">To</label>
				<input type="date" class="form-control" id="endOn" name="endOn">
			</div>
			<button type="submit" class="btn btn-primary">Filter</button>
		</form>
		<table class="table table-hover">
			<thead>
				<tr>
					<th style="width: 3em"></th>
					<th>Subject</th>
					<th style="width: 16em; text-align: center">Status</th>
					<th style="width: 6em; text-align: right">Credits</th>
					<th style="width: 8em; text-align: right">&Delta; shares</th>
				</tr>
			</thead>
			<tbody></tbody>
			<tfoot></tfoot>
		</table>
	</div>
</div>
<script>
function onLoad() {
	gapi.load('auth2', function() {
    gapi.auth2.init();
	});
}
</script>
<script src="https://apis.google.com/js/platform.js?onload=onLoad" async defer></script>
<?php echo $this->partial('task-management/index/task-detail-modal.phtml') ?>
